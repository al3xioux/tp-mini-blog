{% extends 'base.html.twig' %}

{% block title %}Connexion - Mini Blog
{% endblock %}

{% block body %}
	<style>
		.login-container {
			max-width: 450px;
			margin: 3rem auto;
		}
		.login-card {
			background: white;
			padding: 3rem;
			border: 1px solid #1a1a1a;
		}
		.login-title {
			text-align: center;
			color: #1a1a1a;
			font-size: 2rem;
			margin-bottom: 2rem;
			font-weight: 700;
		}
		.alert {
			padding: 1rem;
			margin-bottom: 1.5rem;
			border: 1px solid;
		}
		.alert-danger {
			background: #f8f8f8;
			color: #1a1a1a;
			border-color: #1a1a1a;
		}
		.already-logged {
			background: #f8f8f8;
			color: #1a1a1a;
			border: 1px solid #1a1a1a;
			padding: 1rem;
			margin-bottom: 1.5rem;
		}
		.already-logged a {
			color: #1a1a1a;
			font-weight: 500;
			text-decoration: none;
			border-bottom: 1px solid #1a1a1a;
		}
		.form-group {
			margin-bottom: 1.5rem;
		}
		.form-group label {
			display: block;
			margin-bottom: 0.5rem;
			color: #1a1a1a;
			font-weight: 500;
		}
		.form-control {
			width: 100%;
			padding: 0.75rem;
			border: 1px solid #1a1a1a;
			background: white;
			color: #1a1a1a;
			font-size: 1rem;
			font-family: inherit;
		}
		.form-control:focus {
			outline: none;
			background: #f8f8f8;
		}
		.btn-submit {
			width: 100%;
			padding: 1rem;
			background: #1a1a1a;
			color: white;
			border: 1px solid #1a1a1a;
			font-size: 1rem;
			font-weight: 500;
			cursor: pointer;
			transition: all 0.2s;
		}
		.btn-submit:hover {
			background: white;
			color: #1a1a1a;
		}
		.back-home {
			text-align: center;
			margin-top: 1.5rem;
		}
		.back-home a {
			color: #666;
			text-decoration: none;
		}
		.back-home a:hover {
			color: #1a1a1a;
			text-decoration: underline;
		}
	</style>

	<div class="login-container">
		<div class="login-card">
			<h1 class="login-title">Connexion</h1>

			{% for message in app.flashes('success') %}
				<div class="alert" style="background: #e8f5e9; color: #1a1a1a; border-color: #4caf50;">
					{{ message }}
				</div>
			{% endfor %}

			{% if error %}
				<div class="alert alert-danger">
					{{ error.messageKey|trans(error.messageData, 'security') }}
				</div>
			{% endif %}

			{% if app.user %}
				<div class="already-logged">
					Vous êtes déjà connecté en tant que
					{{ app.user.firstName }}
					{{ app.user.lastName }}.
					<a href="{{ path('app_logout') }}">Se déconnecter</a>
				</div>
			{% endif %}

			<form method="post">
				<div class="form-group">
					<label for="inputEmail">Adresse email</label>
					<input type="email" value="{{ last_username }}" name="email" id="inputEmail" class="form-control" autocomplete="email" required autofocus placeholder="votre@email.com">
				</div>

				<div class="form-group">
					<label for="inputPassword">Mot de passe</label>
					<input type="password" name="password" id="inputPassword" class="form-control" autocomplete="current-password" required placeholder="••••••••">
				</div>

				<input type="hidden" name="_csrf_token" value="{{ csrf_token('authenticate') }}">

				<button class="btn-submit" type="submit">
					Se connecter
				</button>
			</form>

			<div class="back-home">
				<p>
					<a href="{{ path('app_register') }}">Pas encore de compte ? Créer un compte</a>
				</p>
				<a href="{{ path('app_home') }}">← Retour à l'accueil</a>
			</div>
		</div>
	</div>
{% endblock %}
